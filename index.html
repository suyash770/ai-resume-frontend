<!DOCTYPE html>
<html>
<head>
  <title>AI Resume ATS</title>
  <link rel="stylesheet" href="style.css">

  <script>
    const user = JSON.parse(localStorage.getItem("user"));
    if (!user || user.role !== "hr") {
      window.location.href = "login.html";
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
</head>

<body>

<div class="header" style="display:flex; justify-content:space-between; align-items:center; padding:0 20px;">
  <div>AI Resume ATS Dashboard</div>
  <button onclick="logoutUser()" style="background:#e74c3c;">Logout</button>
</div>

<div class="card">
  <h2>Job Description</h2>
  <textarea id="jd" placeholder="Paste Job Description here..."></textarea>

  <div class="drop-zone" id="jdDrop">
    Upload JD PDF
  </div>
  <input type="file" id="jd_pdf" hidden>
  <div class="file-name" id="jdFileName"></div>

  <h2>Upload Resumes</h2>

  <div class="drop-zone" id="resumeDrop">
    Drag & Drop Resume PDFs Here
  </div>
  <input type="file" id="pdf" multiple hidden>
  <div class="file-name" id="resumeFileName"></div>

  <div class="buttons">
    <button onclick="analyze()">Analyze Resume</button>
    <button onclick="startNewHiring()" style="background:#555;">Start New Hiring</button>
  </div>
</div>

<div class="dashboard">
  <div class="table-area">
    <div id="result"></div>
  </div>

  <div class="chart-area">
    <canvas id="scoreChart"></canvas>
  </div>
</div>

<div class="card">
  <h2>Previous Hiring Sessions</h2>
  <ul id="sessionList"></ul>
</div>

<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">&times;</span>
    <div id="modalBody"></div>
  </div>
</div>

<div id="toast" class="toast"></div>

<script src="script.js"></script>
</body>
</html>
